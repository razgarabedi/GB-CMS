@import "tailwindcss";

:root {
  --background: #0f172a;
  --foreground: #f1f5f9;
  --card: #1e293b;
  --card-foreground: #f1f5f9;
  --primary: #3b82f6;
  --primary-foreground: #ffffff;
  --secondary: #64748b;
  --secondary-foreground: #f1f5f9;
  --muted: #334155;
  --muted-foreground: #94a3b8;
  --accent: #475569;
  --accent-foreground: #f1f5f9;
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --border: #334155;
  --input: #1e293b;
  --ring: #3b82f6;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

* {
  border-color: var(--border);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans), Arial, Helvetica, sans-serif;
}

/* Dark Theme Components */
.card {
  @apply bg-slate-800 border border-slate-700 rounded-lg shadow-lg;
}

.card-header {
  @apply p-6 pb-4;
}

.card-title {
  @apply text-xl font-semibold text-white;
}

.card-content {
  @apply p-6 pt-0;
}

.btn {
  @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none;
}

.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 px-4 py-2;
}

.btn-secondary {
  @apply bg-slate-700 text-white hover:bg-slate-600 px-4 py-2;
}

.btn-outline {
  @apply border border-slate-600 bg-transparent hover:bg-slate-800 text-white px-4 py-2;
}

.input {
  @apply flex h-10 w-full rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}

.textarea {
  @apply flex min-h-[80px] w-full rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}

.select {
  @apply flex h-10 w-full items-center justify-between rounded-md border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}

.tab-nav {
  @apply flex space-x-1 rounded-lg bg-slate-800 p-1;
}

.tab-button {
  @apply flex-1 rounded-md px-3 py-2 text-sm font-medium text-slate-400 hover:text-white transition-colors;
}

.tab-button-active {
  @apply bg-slate-700 text-white shadow-sm;
}

.grid-canvas {
  @apply border-2 border-dashed border-slate-600 rounded-lg bg-slate-900/50 relative;
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  aspect-ratio: 16/9;
  object-fit: contain;
}

.canvas-container {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.canvas-wrapper {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  aspect-ratio: 16/9;
  position: relative;
  display: flex;
  flex-direction: column;
}

.canvas-wrapper .grid-canvas {
  flex: 1;
  min-height: 0;
}

.grid-item {
  @apply bg-blue-600 text-white rounded-md shadow-lg flex items-center justify-center font-medium transition-all hover:bg-blue-700;
}

.grid-item.selected {
  @apply ring-2 ring-blue-400 ring-offset-2 ring-offset-slate-900;
}

/* Drag and Drop Enhancements */
.grid-canvas.drag-over {
  @apply border-blue-500 bg-blue-500/10;
}

.drag-preview {
  pointer-events: none;
  z-index: 9999;
}

.widget-dragging {
  @apply opacity-50 transform scale-95;
}

.drop-zone {
  @apply border-2 border-dashed border-blue-500 bg-blue-500/5 rounded-lg;
}

.drop-zone.active {
  @apply border-blue-400 bg-blue-400/10 animate-pulse;
}

/* Grid Guidelines Enhancement */
.grid-guidelines {
  pointer-events: none;
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.grid-canvas:hover .grid-guidelines,
.grid-canvas.drag-over .grid-guidelines {
  opacity: 1;
}

.grid-guidelines .grid-line-vertical {
  @apply absolute top-0 bottom-0 border-l border-blue-500/30;
}

.grid-guidelines .grid-line-horizontal {
  @apply absolute left-0 right-0 border-t border-blue-500/30;
}

/* Responsive Design Enhancements */
@media (max-width: 768px) {
  .tab-nav {
    @apply flex-col space-x-0 space-y-1;
  }
  
  .tab-button {
    @apply text-xs px-2 py-1;
  }
  
  .grid-canvas {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    aspect-ratio: 16/9;
  }
  
  .card-content {
    @apply p-4 pt-0;
  }
  
  .card-header {
    @apply p-4 pb-2;
  }
}

@media (max-width: 1024px) {
  .btn {
    @apply px-3 py-1.5 text-xs;
  }
  
  .card-title {
    @apply text-lg;
  }
  
  .grid-canvas {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    aspect-ratio: 16/9;
  }
}

@media (max-width: 640px) {
  .tab-button {
    @apply flex-col items-center justify-center min-h-[3rem];
  }
  
  .tab-button span:first-child {
    @apply mr-0 mb-1;
  }
  
  .canvas-container {
    padding: 0.5rem;
  }
  
  .canvas-wrapper {
    min-height: 200px;
  }
  
  .grid-canvas {
    min-height: 200px;
  }
  
  .btn {
    @apply px-2 py-1 text-xs;
  }
}

/* Real-time Preview System Styles */
.preview-container {
  @apply relative overflow-hidden rounded-lg border border-slate-600 bg-slate-900;
}

.preview-toolbar {
  @apply flex items-center justify-between p-3 bg-slate-800 border-b border-slate-700;
}

.preview-viewport {
  @apply relative bg-black transition-all duration-300 ease-in-out;
}

.preview-viewport.desktop {
  @apply w-full aspect-video;
}

.preview-viewport.tablet {
  @apply w-3/4 mx-auto aspect-[4/3];
}

.preview-viewport.mobile {
  @apply w-96 max-w-full mx-auto aspect-[9/16];
}

.preview-content {
  @apply absolute inset-0 overflow-hidden;
  transform-origin: top left;
}

.preview-overlay {
  @apply absolute inset-0 pointer-events-none border-2 border-blue-500/50 rounded;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.preview-container:hover .preview-overlay {
  opacity: 1;
}

.preview-controls {
  @apply flex items-center space-x-2;
}

.preview-size-button {
  @apply px-3 py-1.5 text-xs font-medium rounded-md transition-colors;
  @apply border border-slate-600 bg-slate-700 text-slate-300;
  @apply hover:bg-slate-600 hover:text-white;
}

.preview-size-button.active {
  @apply bg-blue-600 text-white border-blue-500;
}

.preview-refresh {
  @apply p-2 rounded-md bg-slate-700 text-slate-300 hover:bg-slate-600 hover:text-white transition-colors;
}

/* Responsive Layout Adjustments */
@media (max-width: 1280px) {
  .preview-viewport.tablet {
    @apply w-full;
  }
  
  .preview-viewport.mobile {
    @apply w-80;
  }
}

@media (max-width: 768px) {
  .preview-toolbar {
    @apply flex-col space-y-2 items-stretch;
  }
  
  .preview-controls {
    @apply justify-center;
  }
  
  .preview-viewport.desktop,
  .preview-viewport.tablet,
  .preview-viewport.mobile {
    @apply w-full aspect-video;
  }
}

/* Advanced Drag and Drop Animations */
.dragging-from-library {
  @apply transform scale-95 opacity-75;
  animation: libraryDragPulse 0.6s ease-in-out infinite;
}

@keyframes libraryDragPulse {
  0%, 100% { 
    transform: scale(0.95);
    opacity: 0.75;
  }
  50% { 
    transform: scale(0.98);
    opacity: 0.9;
  }
}

.dragging-smooth {
  @apply transition-all duration-150 ease-out;
  animation: smoothDrag 0.3s ease-out;
}

@keyframes smoothDrag {
  0% { 
    transform: scale(1) rotate(0deg);
  }
  50% { 
    transform: scale(1.05) rotate(2deg);
  }
  100% { 
    transform: scale(1.02) rotate(0deg);
  }
}

.widget-entrance-animation {
  animation: widgetEntrance 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes widgetEntrance {
  0% {
    transform: scale(0.8) translateY(-20px);
    opacity: 0;
  }
  50% {
    transform: scale(1.1) translateY(-5px);
    opacity: 0.8;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

.widget-move-animation {
  animation: widgetMove 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes widgetMove {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* Enhanced Grid Item Styles */
.grid-item {
  @apply relative overflow-hidden;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, box-shadow;
}

.grid-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15), 0 0 20px rgba(59, 130, 246, 0.1);
}

.grid-item.selected {
  @apply ring-2 ring-blue-400 ring-offset-2 ring-offset-slate-900;
  box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
}

.grid-item.widget-dragging {
  @apply opacity-60 scale-95;
  filter: blur(1px);
  z-index: 50;
}

/* Magnetic Snap Line Animations */
.magnetic-snap-line {
  animation: magneticPulse 1s ease-in-out infinite;
}

@keyframes magneticPulse {
  0%, 100% {
    opacity: 0.7;
    transform: scaleX(1);
  }
  50% {
    opacity: 1;
    transform: scaleX(1.02);
  }
}

/* Drop Zone Highlight Animations */
.drop-zone-highlight {
  animation: dropZonePulse 1.5s ease-in-out infinite;
}

@keyframes dropZonePulse {
  0%, 100% {
    opacity: 0.7;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.02);
  }
}

/* Collision Warning Animation */
.collision-warning {
  animation: collisionShake 0.5s ease-in-out 3;
}

@keyframes collisionShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Enhanced Drag Ghost Styles */
.drag-preview-enhanced {
  animation: ghostFloat 2s ease-in-out infinite;
  backdrop-filter: blur(10px);
}

@keyframes ghostFloat {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-3px);
  }
}

/* Improved Canvas Grid Guidelines */
.grid-guidelines {
  pointer-events: none;
  transition: opacity 0.3s ease-in-out;
}

.grid-line-vertical,
.grid-line-horizontal {
  @apply absolute bg-blue-400/20;
  transition: all 0.2s ease-in-out;
}

.grid-canvas:hover .grid-line-vertical,
.grid-canvas:hover .grid-line-horizontal,
.grid-canvas.drag-over .grid-line-vertical,
.grid-canvas.drag-over .grid-line-horizontal {
  @apply bg-blue-400/40;
}

/* Smooth Canvas Transitions */
.grid-canvas {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.grid-canvas.drag-over {
  background: radial-gradient(circle at center, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
  border-color: rgba(59, 130, 246, 0.3);
}

/* Widget Library Enhancements */
.widget-card {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, box-shadow;
}

.widget-card:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.widget-card:active {
  transform: translateY(0px) scale(0.98);
  transition-duration: 0.1s;
}

/* Accessibility Enhancements */
.grid-item:focus-visible,
.widget-card:focus-visible {
  @apply outline-none ring-2 ring-blue-500 ring-offset-2 ring-offset-slate-900;
}

/* Performance Optimizations */
.grid-item,
.widget-card,
.drag-preview-enhanced {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Dark Mode Specific Enhancements */
@media (prefers-color-scheme: dark) {
  .grid-item:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3), 0 0 20px rgba(59, 130, 246, 0.15);
  }
  
  .widget-card:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }
}

/* Keyboard Movement Animations */
.widget-keyboard-move {
  animation: keyboardMove 0.2s cubic-bezier(0.2, 0, 0.2, 1);
}

@keyframes keyboardMove {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

/* Reduced Motion Accessibility */
@media (prefers-reduced-motion: reduce) {
  .dragging-from-library,
  .dragging-smooth,
  .widget-entrance-animation,
  .widget-move-animation,
  .widget-keyboard-move,
  .magnetic-snap-line,
  .drop-zone-highlight,
  .drag-preview-enhanced {
    animation: none !important;
  }
  
  .grid-item,
  .widget-card,
  .grid-canvas {
    transition: none !important;
  }
}